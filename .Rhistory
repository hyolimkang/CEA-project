illness_duration = .043  ,
cfr              = .019 ,
age_death        =  7.5  ,
life_exp         =  72.68 ,
parameters_change,
change) {
for (parameter in parameters_change) {
diff <-  (owsa_sample_ul$parameter) - (owsa_sample_ll$parameter)
}
return(diff = diff)
}
icer_dt_diff <- data.table (run_id = 1 : length(parameters_change))
i <- 0
for (parameter in parameters_change) {
i <- i + 1
val_diff <-  boudns_diff(v_cost            = 2.96             ,
delivery_cost     = 1.49             ,
tot_pop           = 159831           ,
vacc_pop          = 113420           ,
postvacc_p1       = 23               ,
facility_cost     = 97.33            ,
dmc               = 183.07           ,
dnmc              = 30.13            ,
indirect          = 73.09            ,
ve                = .81              ,
dw                = .052             ,
illness_duration  = .043             ,
cfr               = .019             ,
age_death         =  7.5             ,
life_exp          =  72.68           ,
parameters_change = parameter        ,
change            = -change          )
icer_dt_diff [i, `:=` (    totcost_unvacc            = val_diff$totcost_unvacc,
totcost_vacc              = val_diff$totcost_vacc,
incremental_cost          = val_diff$incremental_cost,
incremental_effect        = val_diff$incremental_effect,
icer                      = val_diff$icer,
prevacc                   = val_diff$prevacc,
temp_distance             = val_diff$temp_distance,
pre_death                 = val_diff$pre_death,
post_death                = val_diff$post_death,
yll_pre                   = val_diff$yll_pre,
yll_post                  = val_diff$yll_post,
yld_pre                   = val_diff$yld_pre,
yld_post                  = val_diff$yld_post,
yld_averted               = val_diff$yld_averted,
yll_averted               = val_diff$yll_averted,
daly_total                = val_diff$daly_total,
icer_daly                 = val_diff$icer_daly
)]
}
icer_dt_diff <- data.table (run_id = 1 : length(parameters_change))
i <- 0
for (parameter in parameters_change) {
i <- i + 1
val_diff <-  bounds_diff(v_cost            = 2.96             ,
delivery_cost     = 1.49             ,
tot_pop           = 159831           ,
vacc_pop          = 113420           ,
postvacc_p1       = 23               ,
facility_cost     = 97.33            ,
dmc               = 183.07           ,
dnmc              = 30.13            ,
indirect          = 73.09            ,
ve                = .81              ,
dw                = .052             ,
illness_duration  = .043             ,
cfr               = .019             ,
age_death         =  7.5             ,
life_exp          =  72.68           ,
parameters_change = parameter        ,
change            = -change          )
icer_dt_diff [i, `:=` (    totcost_unvacc            = val_diff$totcost_unvacc,
totcost_vacc              = val_diff$totcost_vacc,
incremental_cost          = val_diff$incremental_cost,
incremental_effect        = val_diff$incremental_effect,
icer                      = val_diff$icer,
prevacc                   = val_diff$prevacc,
temp_distance             = val_diff$temp_distance,
pre_death                 = val_diff$pre_death,
post_death                = val_diff$post_death,
yll_pre                   = val_diff$yll_pre,
yll_post                  = val_diff$yll_post,
yld_pre                   = val_diff$yld_pre,
yld_post                  = val_diff$yld_post,
yld_averted               = val_diff$yld_averted,
yll_averted               = val_diff$yll_averted,
daly_total                = val_diff$daly_total,
icer_daly                 = val_diff$icer_daly
)]
}
val_diff
# differences in ICER between upper - lower bound
bounds_diff <- function(v_cost           = 2.96,
delivery_cost    = 1.49 ,
tot_pop          = 159831,
vacc_pop         = 113420,
postvacc_p1      = 23,
facility_cost    = 97.33 ,
dmc              = 183.07 ,
dnmc             = 30.13,
indirect         = 73.09 ,
ve               = .81 ,
dw               = .052,
illness_duration = .043  ,
cfr              = .019 ,
age_death        =  7.5  ,
life_exp         =  72.68 ,
parameters_change,
change) {
diff <-  (owsa_sample_ul$icer_daly) - (owsa_sample_ll$icer_daly)
}
return(diff = diff)
}
# differences in ICER between upper - lower bound
bounds_diff <- function(v_cost           = 2.96,
delivery_cost    = 1.49 ,
tot_pop          = 159831,
vacc_pop         = 113420,
postvacc_p1      = 23,
facility_cost    = 97.33 ,
dmc              = 183.07 ,
dnmc             = 30.13,
indirect         = 73.09 ,
ve               = .81 ,
dw               = .052,
illness_duration = .043  ,
cfr              = .019 ,
age_death        =  7.5  ,
life_exp         =  72.68 ,
parameters_change,
change) {
diff <-  (owsa_sample_ul$icer_daly) - (owsa_sample_ll$icer_daly)
return(diff = diff)
}
icer_dt_diff <- data.table (run_id = 1 : length(parameters_change))
i <- 0
for (parameter in parameters_change) {
i <- i + 1
val_diff <-  bounds_diff(v_cost            = 2.96             ,
delivery_cost     = 1.49             ,
tot_pop           = 159831           ,
vacc_pop          = 113420           ,
postvacc_p1       = 23               ,
facility_cost     = 97.33            ,
dmc               = 183.07           ,
dnmc              = 30.13            ,
indirect          = 73.09            ,
ve                = .81              ,
dw                = .052             ,
illness_duration  = .043             ,
cfr               = .019             ,
age_death         =  7.5             ,
life_exp          =  72.68           ,
parameters_change = parameter        ,
change            = -change          )
icer_dt_diff [i, `:=` (    totcost_unvacc            = val_diff$totcost_unvacc,
totcost_vacc              = val_diff$totcost_vacc,
incremental_cost          = val_diff$incremental_cost,
incremental_effect        = val_diff$incremental_effect,
icer                      = val_diff$icer,
prevacc                   = val_diff$prevacc,
temp_distance             = val_diff$temp_distance,
pre_death                 = val_diff$pre_death,
post_death                = val_diff$post_death,
yll_pre                   = val_diff$yll_pre,
yll_post                  = val_diff$yll_post,
yld_pre                   = val_diff$yld_pre,
yld_post                  = val_diff$yld_post,
yld_averted               = val_diff$yld_averted,
yll_averted               = val_diff$yll_averted,
daly_total                = val_diff$daly_total,
icer_daly                 = val_diff$icer_daly
)]
}
val_diff
# differences in ICER between upper - lower bound
bounds_diff <- function(v_cost           = 2.96,
delivery_cost    = 1.49 ,
tot_pop          = 159831,
vacc_pop         = 113420,
postvacc_p1      = 23,
facility_cost    = 97.33 ,
dmc              = 183.07 ,
dnmc             = 30.13,
indirect         = 73.09 ,
ve               = .81 ,
dw               = .052,
illness_duration = .043  ,
cfr              = .019 ,
age_death        =  7.5  ,
life_exp         =  72.68 ,
parameters_change,
change) {
diff_totcost_unvacc <- (icer_dt_owsa_ul$totcost_unvacc) - (icer_dt_owsa_ll$totcost_unvacc)
diff_daly <-  (icer_dt_owsa_ul$icer_daly) - (icer_dt_owsa_ll$icer_daly)
return(diff_daly = diff_daly,
diff_totcost_unvacc = diff_totcost_unvacc)
}
icer_dt_diff <- data.table (run_id = 1 : length(parameters_change))
i <- 0
for (parameter in parameters_change) {
i <- i + 1
val_diff <-  bounds_diff(v_cost            = 2.96             ,
delivery_cost     = 1.49             ,
tot_pop           = 159831           ,
vacc_pop          = 113420           ,
postvacc_p1       = 23               ,
facility_cost     = 97.33            ,
dmc               = 183.07           ,
dnmc              = 30.13            ,
indirect          = 73.09            ,
ve                = .81              ,
dw                = .052             ,
illness_duration  = .043             ,
cfr               = .019             ,
age_death         =  7.5             ,
life_exp          =  72.68           ,
parameters_change = parameter        ,
change            = -change          )
icer_dt_diff [i, `:=` (    totcost_unvacc            = val_diff$totcost_unvacc,
totcost_vacc              = val_diff$totcost_vacc,
incremental_cost          = val_diff$incremental_cost,
incremental_effect        = val_diff$incremental_effect,
icer                      = val_diff$icer,
prevacc                   = val_diff$prevacc,
temp_distance             = val_diff$temp_distance,
pre_death                 = val_diff$pre_death,
post_death                = val_diff$post_death,
yll_pre                   = val_diff$yll_pre,
yll_post                  = val_diff$yll_post,
yld_pre                   = val_diff$yld_pre,
yld_post                  = val_diff$yld_post,
yld_averted               = val_diff$yld_averted,
yll_averted               = val_diff$yll_averted,
daly_total                = val_diff$daly_total,
icer_daly                 = val_diff$icer_daly
)]
}
# differences in ICER between upper - lower bound
bounds_diff <- function(v_cost           = 2.96,
delivery_cost    = 1.49 ,
tot_pop          = 159831,
vacc_pop         = 113420,
postvacc_p1      = 23,
facility_cost    = 97.33 ,
dmc              = 183.07 ,
dnmc             = 30.13,
indirect         = 73.09 ,
ve               = .81 ,
dw               = .052,
illness_duration = .043  ,
cfr              = .019 ,
age_death        =  7.5  ,
life_exp         =  72.68 ,
parameters_change,
change) {
diff_totcost_unvacc <- (icer_dt_owsa_ul$totcost_unvacc) - (icer_dt_owsa_ll$totcost_unvacc)
diff_daly <-  (icer_dt_owsa_ul$icer_daly) - (icer_dt_owsa_ll$icer_daly)
return(list(diff_daly           = diff_daly,
diff_totcost_unvacc = diff_totcost_unvacc))
}
icer_dt_diff <- data.table (run_id = 1 : length(parameters_change))
i <- 0
for (parameter in parameters_change) {
i <- i + 1
val_diff <-  bounds_diff(v_cost            = 2.96             ,
delivery_cost     = 1.49             ,
tot_pop           = 159831           ,
vacc_pop          = 113420           ,
postvacc_p1       = 23               ,
facility_cost     = 97.33            ,
dmc               = 183.07           ,
dnmc              = 30.13            ,
indirect          = 73.09            ,
ve                = .81              ,
dw                = .052             ,
illness_duration  = .043             ,
cfr               = .019             ,
age_death         =  7.5             ,
life_exp          =  72.68           ,
parameters_change = parameter        ,
change            = -change          )
icer_dt_diff [i, `:=` (    totcost_unvacc            = val_diff$totcost_unvacc,
totcost_vacc              = val_diff$totcost_vacc,
incremental_cost          = val_diff$incremental_cost,
incremental_effect        = val_diff$incremental_effect,
icer                      = val_diff$icer,
prevacc                   = val_diff$prevacc,
temp_distance             = val_diff$temp_distance,
pre_death                 = val_diff$pre_death,
post_death                = val_diff$post_death,
yll_pre                   = val_diff$yll_pre,
yll_post                  = val_diff$yll_post,
yld_pre                   = val_diff$yld_pre,
yld_post                  = val_diff$yld_post,
yld_averted               = val_diff$yld_averted,
yll_averted               = val_diff$yll_averted,
daly_total                = val_diff$daly_total,
icer_daly                 = val_diff$icer_daly
)]
}
View(val_diff)
icer_dt_diff <- data.table (run_id = 1 : length(parameters_change))
i <- 0
for (parameter in parameters_change) {
i <- i + 1
val_diff <-  bounds_diff(v_cost            = 2.96             ,
delivery_cost     = 1.49             ,
tot_pop           = 159831           ,
vacc_pop          = 113420           ,
postvacc_p1       = 23               ,
facility_cost     = 97.33            ,
dmc               = 183.07           ,
dnmc              = 30.13            ,
indirect          = 73.09            ,
ve                = .81              ,
dw                = .052             ,
illness_duration  = .043             ,
cfr               = .019             ,
age_death         =  7.5             ,
life_exp          =  72.68           ,
parameters_change = parameter        ,
change            = -change          )
icer_dt_diff [i, `:=` (    diff_daly                 = val_diff$diff_daly,
diff_totcost_unvacc       = val_diff$diff_totcost_unvacc
)]
}
diff_totcost_unvacc <- (icer_dt_owsa_ul$totcost_unvacc) - (icer_dt_owsa_ll$totcost_unvacc)
diff_daly <-  (icer_dt_owsa_ul$icer_daly) - (icer_dt_owsa_ll$icer_daly)
diff_daly
diff_totcost_unvacc <- list((icer_dt_owsa_ul$totcost_unvacc)
- (icer_dt_owsa_ll$totcost_unvacc))
diff_daly <-  list((icer_dt_owsa_ul$icer_daly)
- (icer_dt_owsa_ll$icer_daly))
diff_totcost_unvacc
diff_daly
append_icers <- data.table :: rbindlist(list(icer_dt_owsa_ll,icer_dt_owsa_ul))
?for()
View(append_icers)
View(append_icers)
j <- 1
for (row in 1:nrow(append_icers)) {
j <- j +12
diff <- append_icers[row, c(2:17)]
}
View(icer_dt_diff)
icer_dt_diff <- data.table (run_id = 1 : length(parameters_change))
?for (variable in vector) {
}
icer_dt_diff <- data.table (run_id = 1 : length(parameters_change))
View(icer_dt_diff)
View(append_icers)
f1 <- function(x){
function() {
x+10
}
}
f1(1)
f1(1)
f1(1)()
f1 <- function(x){
x+10
}
f1(1)
fahrenheit_to_celsius <- function(temp_F) {
temp_C <- (temp_F - 32) * 5 / 9
return(temp_C)
}
fahrenheit_to_celsius(4)
fahrenheit_to_celsius(42)
fahrenheit_to_celsius(41)
owsa <- function (v_cost           ,
delivery_cost    ,
tot_pop          ,
vacc_pop         ,
postvacc_p1      ,
facility_cost    ,
dmc              ,
dnmc             ,
indirect         ,
ve               ,
dw               ,
illness_duration ,
cfr              ,
age_death        ,
life_exp) {
totcost_vacc       <- (v_cost + delivery_cost) * (vacc_pop) + (postvacc_p1) * (facility_cost + dmc + dnmc + indirect)
prevacc            <- (postvacc_p1)/(1-ve*(vacc_pop_temp/tot_pop))
totcost_unvacc     <- (prevacc)*(facility_cost+ dmc_temp + dnmc + indirect)
incremental_cost   <- (totcost_vacc) - (totcost_unvacc)
incremental_effect <- (prevacc)      - (postvacc_p1)
icer               <- incremental_cost / incremental_effect
distance           <- (life_exp) - (age_death)
pre_death          <- (cfr)*(prevacc)
post_death         <- (cfr)*(postvacc_p1)
yll_pre            <- (pre_death)*(distance)
yll_post           <- (post_death)*(distance)
yld_pre            <- (prevacc)*(dw)*(illness_duration)
yld_post           <- (postvacc_p1)*(dw)*(illness_duration)
yld_averted        <- (prevacc - postvacc_p1)* (dw) *(illness_duration)
yll_averted        <- (yll_pre)  -(yll_post)
daly_total         <- (yll_averted)  + (yld_averted)
icer_daly          <- incremental_cost / daly_total
return(icer_daly)
}
# results: i want the lower value of icer when controlling all the other variables
# for instance, if i wan the lower value icer of v_cost, i want to put lower value for v_cost
# and controlling all other variables to the mid values
icer_low   <- owsa (v_cost            = 2.96,
delivery_cost     = 1.49 ,
tot_pop           = 159831,
vacc_pop          = 113420,
postvacc_p1       = 23,
facility_cost     = 97.33 ,
dmc               = 183.07 ,
dnmc              = 30.13,
indirect          = 73.09 ,
ve                = .81 ,
dw                = .052,
illness_duration  = .043  ,
cfr               = .019 ,
age_death         =  7.5  ,
life_exp          =  72.68)
owsa <- function (v_cost           ,
delivery_cost    ,
tot_pop          ,
vacc_pop         ,
postvacc_p1      ,
facility_cost    ,
dmc              ,
dnmc             ,
indirect         ,
ve               ,
dw               ,
illness_duration ,
cfr              ,
age_death        ,
life_exp) {
totcost_vacc       <- (v_cost + delivery_cost) * (vacc_pop) + (postvacc_p1) * (facility_cost + dmc + dnmc + indirect)
prevacc            <- (postvacc_p1)/(1-ve*(vacc_pop/tot_pop))
totcost_unvacc     <- (prevacc)*(facility_cost+ dmc + dnmc + indirect)
incremental_cost   <- (totcost_vacc) - (totcost_unvacc)
incremental_effect <- (prevacc)      - (postvacc_p1)
icer               <- incremental_cost / incremental_effect
distance           <- (life_exp) - (age_death)
pre_death          <- (cfr)*(prevacc)
post_death         <- (cfr)*(postvacc_p1)
yll_pre            <- (pre_death)*(distance)
yll_post           <- (post_death)*(distance)
yld_pre            <- (prevacc)*(dw)*(illness_duration)
yld_post           <- (postvacc_p1)*(dw)*(illness_duration)
yld_averted        <- (prevacc - postvacc_p1)* (dw) *(illness_duration)
yll_averted        <- (yll_pre)  -(yll_post)
daly_total         <- (yll_averted)  + (yld_averted)
icer_daly          <- incremental_cost / daly_total
return(icer_daly)
}
# results: i want the lower value of icer when controlling all the other variables
# for instance, if i wan the lower value icer of v_cost, i want to put lower value for v_cost
# and controlling all other variables to the mid values
icer_low   <- owsa (v_cost            = 2.96,
delivery_cost     = 1.49 ,
tot_pop           = 159831,
vacc_pop          = 113420,
postvacc_p1       = 23,
facility_cost     = 97.33 ,
dmc               = 183.07 ,
dnmc              = 30.13,
indirect          = 73.09 ,
ve                = .81 ,
dw                = .052,
illness_duration  = .043  ,
cfr               = .019 ,
age_death         =  7.5  ,
life_exp          =  72.68)
icer_low
x <- runif(1, 0, 10)
if(x>3) {
y <-10
} else {
y<-0
}
x<- matrix(1:6, 2,3)
for (i in seq_len(ncol(x))) {
for(j in seq_len(ncol(x))) {
print(x[i,j])
}
}
x<- matrix(1:6, 2,3)
x
y<- matrix(data = 6, nrow=3, ncol=2)
y
y<- matrix(data = 1:6, nrow=3, ncol=2)
y
y<- matrix(data = 1:10, nrow=3, ncol=2)
y<- matrix(data = 1:8, nrow=4, ncol=2)
?seq_len
x<- matrix(1:6, 2,3)
for (i in seq_len(ncol(x))) {
for(j in seq_len(ncol(x))) {
print(x[i,j])
}
}
x<- matrix(1:6, 2,3)
for (i in seq_len(nrow(x))) {
for(j in seq_len(ncol(x))) {
print(x[i,j])
}
}
x<- matrix(1:6, 2,3)
x
